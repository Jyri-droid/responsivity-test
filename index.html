<!DOCTYPE html>
<html lang="en">
    <title>Responsive panel test</title>
    <meta name="author" content="Jyri Konttinen">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"> 
<head>
<style>
    * {
        font-family: -apple-system, BlinkMacSystemFont, sans-serif;
        font-weight: 400;
        margin: 0;
		padding: 0;
		font-family: 'Inter', sans-serif;
		font-size: 16px;
		box-sizing: border-box;
        color: lightgray;
    }
    body {
        margin: 1rem;
        background-color: black;
        touch-action: manipulation;
    }
    .container, .container div, .boxContainer, button, .boxContainer p, label {
        padding: .5rem;
        border: 1px solid rgb(255,255,255,0.2);
        width: 100%;
    }
    .boxContainer {
        display: flex;
        flex-wrap: wrap;
    }
    .box {
        flex-basis: calc(100%/3);
    }
    .row {
        display: flex;
    }
    label {
        display: none;
    }
    .order {
        flex-basis: 2rem;
        text-align: center;
    }
    h1 {
        font-size: 2rem;
        font-weight: 100;
    }
    h2 {
        font-size: 1.25rem;
    }
    h1, h2 {
        margin: .5rem;
    }
    button {
        height: 3rem;
        flex-basis: 100%;
        background-color: black;
        border-radius: 1.5rem;
        color: lightgray;
    }
    button:hover {
        cursor: pointer;
    }
    button:disabled {
        color: rgb(255,255,255,.25);
    }
    .mobileButtons {
        display: none;
    }
    button:not(.mobileButtons button) {
        margin-top: .5rem;
    }
    #mobileOrder {
        text-align: center;
        flex-basis: 15rem;
        padding-top: .9rem;
        color: rgb(255,255,255,.25);
    }
    .highlight {
        color: lightgray;
    }

    @media only screen and (max-width: 1000px) {
        .order {
            display: none;
        }
        
    }

    @media only screen and (max-width: 800px) {
        .container {
            display: flex;
        }
        h1 {
            flex-basis: 40%;
        }
        .boxContainer {
            display: block;
            flex-basis: 60%;
        }

        .order {
            display: none;
        }
    }

    @media only screen and (max-width: 600px) {
        .container {
            display: flex;
            flex-direction: column;
        }
        h2 {
            display: none;
        }
        .box {
            display: flex;
            overflow: hidden;
        }
        .row {
            display: block;
            flex: 1 0 auto;
            position: relative;
            transition: left .5s;
        }
        .row:nth-child(2), .row:nth-child(3), .row:nth-child(4) {
            left: 0%;
        }
        .row:not(:nth-child(2), :nth-child(3), :nth-child(4)) {
            display: none;
        }
        label {
            display: block;
            font-size: .5rem;
        }
        .boxContainer > button {
            display: none;
        }
        .mobileButtons {
            display: flex;
        }
    }

</style>
</head>
<body>
    <div class="container">
        <h1>Header</h1>
        <div class="boxContainer">
            <div class="box">
                <h2>Category 1</h2>
                <div class="row"><div class="order">1</div><label>Category 1</label><p>Item ></p></div>
                <div class="row"><div class="order">1</div><label>Category 1</label><p>Item ></p></div>
                <div class="row"><div class="order">1</div><label>Category 1</label><p>Item ></p></div>
            </div>
            <div class="box">
                <h2>Category 2</h2>
                <div class="row"><div class="order">1</div><label>Category 2</label><p>Item ></p></div>
                <div class="row"><div class="order">2</div><label>Category 2</label><p>Item ></p></div>
                <div class="row"><div class="order">3</div><label>Category 2</label><p>Item ></p></div>
            </div>
            <div class="box">
                <h2>Category 3</h2>
                <div class="row"><div class="order">1</div><label>Category 3</label><p>Item ></p></div>
                <div class="row"><div class="order">2</div><label>Category 3</label><p>Item ></p></div>
                <div class="row"><div class="order">3</div><label>Category 3</label><p>Item ></p></div>
            </div>
            <div class="mobileButtons">
                <button id="prev" disabled><</button><p id="mobileOrder"><span class="highlight">&bull;</span> &bull; &bull;</p><button id="next">></button>
            </div>
            <button id="showMore">+ Show more</button>
        </div>
    </div>
</body>
<script>

// DESKTOP

document.getElementById("showMore").addEventListener("click", function() {
    const allBoxes = document.getElementsByClassName("box");
    for (let i = 0; i < allBoxes.length; i++) {
        const orderCount = allBoxes[i].getElementsByClassName("order").length;
        for (let j = 0; j < 3; j++) {
            const nodeToCopy = allBoxes[i].querySelector(".row");
            let newNode = nodeToCopy.cloneNode(true);
            allBoxes[i].appendChild(newNode);
            newNode.querySelector(".order").innerHTML = orderCount + 1 + j;
        }
    }
});

// MOBILE

const boxContainer = document.querySelector(".boxContainer");
const boxes = boxContainer.getElementsByClassName("box");

function moveRows(position) {
    for (let i = 0; i < boxes.length; i++) {
        const rows = boxes[i].getElementsByClassName("row");
        for (j of rows) {
            j.style.left = position * -1 * 100 + "%";
        }
    }
}

const prev = document.getElementById("prev");
const next = document.getElementById("next");
let clickCounter = 0;

function moveOrder(position) {
    let currentOrder = [];
    for (let j = 1; j < (boxes.length + 1); j++) {
        if (position + 1 == j) {
            currentOrder.push("<span class='highlight'>&bull;</span>"); 
        } else {    
            currentOrder.push("&bull;");
        }
    }
    document.getElementById("mobileOrder").innerHTML = currentOrder.toString().replace(/,/g, " ");
}

function disableFirstOrLast(position) {
    if (position == 0) {
        prev.disabled = true;
    } else { prev.disabled = false; }
    if (position == boxes.length - 1) {
        next.disabled = true;
    } else { next.disabled = false; }
}

next.addEventListener("click", function() {
    if (clickCounter < boxes.length - 1) { clickCounter = clickCounter + 1 };
    moveRows(clickCounter);
    moveOrder(clickCounter);
    disableFirstOrLast(clickCounter);
});

prev.addEventListener("click", function() {
    if (clickCounter > 0) { clickCounter = clickCounter - 1 };
    moveRows(clickCounter);
    moveOrder(clickCounter);
    disableFirstOrLast(clickCounter);
});

</script>
</html>